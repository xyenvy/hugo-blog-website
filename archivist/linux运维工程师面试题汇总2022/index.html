<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Linux运维工程师面试题汇总(2022) | Cookie</title>
<meta name="keywords" content="">
<meta name="description" content="“机会总是留给有准备的人的”，Linux运维工程师必备的基础知识可谓是由点及面、由浅入深。尤其是在云原生潮流趋势下，我们需要持续拥抱新技术、新思想，而不是在自己的舒适区原地踏步。">
<meta name="author" content="Cookie">
<link rel="canonical" href="http://hugo.itshare.work/archivist/linux%E8%BF%90%E7%BB%B4%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E9%A2%98%E6%B1%87%E6%80%BB2022/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.js" onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="http://hugo.itshare.work/img/Q.gif">
<link rel="icon" type="image/png" sizes="16x16" href="http://hugo.itshare.work/img/Q.gif">
<link rel="icon" type="image/png" sizes="32x32" href="http://hugo.itshare.work/img/Q.gif">
<link rel="apple-touch-icon" href="http://hugo.itshare.work/img/Q.gif">
<link rel="mask-icon" href="http://hugo.itshare.work/img/Q.gif">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script defer src="https://unpkg.com/mermaid@8.8.1/dist/mermaid.min.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.min.js"></script>



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = ""; 
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<meta property="og:title" content="Linux运维工程师面试题汇总(2022)" />
<meta property="og:description" content="“机会总是留给有准备的人的”，Linux运维工程师必备的基础知识可谓是由点及面、由浅入深。尤其是在云原生潮流趋势下，我们需要持续拥抱新技术、新思想，而不是在自己的舒适区原地踏步。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://hugo.itshare.work/archivist/linux%E8%BF%90%E7%BB%B4%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E9%A2%98%E6%B1%87%E6%80%BB2022/" />
<meta property="og:image" content="http://oss.itshare.work/itshare-work-images/2.jpg" /><meta property="article:section" content="archivist" />
<meta property="article:published_time" content="2022-09-02T20:08:44+00:00" />
<meta property="article:modified_time" content="2022-09-02T20:08:44+00:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://oss.itshare.work/itshare-work-images/2.jpg" />
<meta name="twitter:title" content="Linux运维工程师面试题汇总(2022)"/>
<meta name="twitter:description" content="“机会总是留给有准备的人的”，Linux运维工程师必备的基础知识可谓是由点及面、由浅入深。尤其是在云原生潮流趋势下，我们需要持续拥抱新技术、新思想，而不是在自己的舒适区原地踏步。"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [

        {
          "@type": "ListItem",
          "position":  1 ,
          "name": "📒归档",
          "item": "http://hugo.itshare.work/archivist/"
        }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Linux运维工程师面试题汇总(2022)",
      "item": "http://hugo.itshare.work/archivist/linux%E8%BF%90%E7%BB%B4%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E9%A2%98%E6%B1%87%E6%80%BB2022/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Linux运维工程师面试题汇总(2022)",
  "name": "Linux运维工程师面试题汇总(2022)",
  "description": "“机会总是留给有准备的人的”，Linux运维工程师必备的基础知识可谓是由点及面、由浅入深。尤其是在云原生潮流趋势下，我们需要持续拥抱新技术、新思想，而不是在自己的舒适区原地踏步。",
  "keywords": [
    
  ],
  "articleBody": "一、linux 1.linux系统启动流程 第一步：开机自检，加载BIOS 第二步：读取ＭＢＲ 第三步：Boot Loader　grub引导菜单 第四步：加载kernel内核 第五步：init进程依据inittab文件夹来设定运行级别 第六步：init进程执行rc.sysinit 第七步：启动内核模块 第八步：执行不同运行级别的脚本程序 第九步：执行/etc/rc.d/rc.lo 2.linux文件类型 文件属性 文件类型 - 常规文件，即file d 目录文件 b block device 即块设备文件，如硬盘;支持以block为单位进行随机访问 c character device 即字符设备文件，如键盘支持以character为单位进行线性访问 l symbolic link 即符号链接文件，又称软链接文件 p pipe 即命名管道文件 s socket 即套接字文件，用于实现两个进程进行通信 3.centos6和7怎么将源码安装的程序添加到开机自启动？ 通用方法：编辑/etc/rc.d/rc.local文件，在文件末尾添加启动服务命令 centos6 ①进入到/etc/rc.d/init.d目录下； ②新建一个服务启动脚本，脚本中指定chkconfig参数； ③添加执行权限； ④执行chkconfig –add 添加服务自启动； centos7 ①进入到/usr/lib/systemd/system目录下； ②新建自定义服务文件，文件中包含[Unit] [Service] [Install]相关配置，然后添加下执行权限； ③执行systemctl enable 服务名称； 4.简述lvm，如何给使用lvm的/分区扩容？ 功能：可以对磁盘进行动态管理。动态按需调整大小 概念： ①PV - 物理卷：物理卷在逻辑卷管理中处于最底层，它可以是实际物理硬盘上的分区，也可以是整个物理硬盘，也可以是raid设备。 ②VG - 卷组：卷组建立在物理卷之上，一个卷组中至少要包括一个物理卷，在卷组建立之后可动态添加物理卷到卷组中。一个逻辑卷管理系统工程中可以只有一个卷组，也可以拥有多个卷组。 ③LV - 逻辑卷：逻辑卷建立在卷组之上，卷组中的未分配空间可以用于建立新的逻辑卷，逻辑卷建立后可以动态地扩展和缩小空间。系统中的多个逻辑卷可以属于同一个卷组，也可以属于不同的多个卷组。\n给/分区扩容步骤： ①添加磁盘 ②使用fdisk命令对新增加的磁盘进行分区 ③分区完成后修改分区类型为lvm ④使用pvcreate创建物理卷 ⑤使用vgextend命令将新增加的分区加入到根目录分区中 ⑥使用lvextend命令进行扩容 ⑦使用xfs_growfs调整卷分区大小\n5.为何du和df统计结果不一致？ 用户删除了大量的文件被删除后，在文件系统目录中已经不可见了，所以du就不会再统计它。 然而如果此时还有运行的进程持有这个已经被删除的文件句柄，那么这个文件就不会真正在磁盘中被删除，分区超级块中的信息也就不会更改，df仍会统计这个被删除的文件。 可通过 lsof命令查询处于deleted状态的文件，被删除的文件在系统中被标记为deleted。如果系统有大量deleted状态的文件，会导致du和df统计结果不一致。 6.如何升级内核？ 方法一 # 添加第三方yum源进行下载安装。 Centos 6 YUM源：http://www.elrepo.org/elrepo-release-6-6.el6.elrepo.noarch.rpm Centos 7 YUM源：http://www.elrepo.org/elrepo-release-7.0-2.el7.elrepo.noarch.rpm # 先导入elrepo的key，然后安装elrepo的yum源： rpm -import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org rpm -Uvh http://www.elrepo.org/elrepo-release-7.0-2.el7.elrepo.noarch.rpm # 查看可用的内核相关包 yum --disablerepo=\"*\" --enablerepo=\"elrepo-kernel\" list available yum -y --enablerepo=elrepo-kernel install 方法二 # 通过下载kernel image的rpm包进行安装。 官方 Centos 6: http://elrepo.org/linux/kernel/el6/x86_64/RPMS/ 官方 Centos 7: http://elrepo.org/linux/kernel/el7/x86_64/RPMS/ # 获取下载链接进行下载安装即可 wget https://elrepo.org/linux/kernel/el7/x86_64/RPMS/kernel-lt-4.4.185-1.el7.elrepo.x86_64.rpm rpm -ivh kernel-lt-4.4.185-1.el7.elrepo.x86_64.rp # 查看默认启动顺序 [root@localhost ~]# awk -F\\' '$1==\"menuentry \" {print $2}' /etc/grub2.cfg CentOS Linux (5.2.2-1.el7.elrepo.x86_64) 7 (Core) CentOS Linux (4.4.182-1.el7.elrepo.x86_64) 7 (Core) CentOS Linux (3.10.0-957.21.3.el7.x86_64) 7 (Core) CentOS Linux (3.10.0-957.10.1.el7.x86_64) 7 (Core) CentOS Linux (3.10.0-327.el7.x86_64) 7 (Core) CentOS Linux (0-rescue-e34fb4f1527b4f2d9fc75b77c016b6e7) 7 (Core) 由上面可以看出新内核(4.12.4)目前位置在0，原来的内核(3.10.0)目前位置在1 # 设置默认启动 [root@localhost ~]# grub2-set-default 0　// 0代表当前第一行，也就是4.12.4版本 # 重启验证 7.nginx日志访问量前十的ip怎么统计？\nawk '{array[$1]++}END{for (ip in array)print ip,array[ip]}' access.log |sort -k2 -rn|head 8.如何删除/var/log/下.log结尾的30天前的日志？\nfind /var/log/ -type f -name .*.log -mtime 30|xargs rm -f 9.ansible有哪些模块？功能是什么？\n模块 功能 copy 拷贝文件到被控端 cron 定时任务 fetch 拷贝被控端文件到本地 file 文件模块 group 用户组模块 user 用户模块 hostname 主机名模块 script 脚本模块 service 服务启动模块 command 远程执行命令模块 shell 远程执行命令模块，command高级用法 yum 安装包组模块 setup 查看主机系统信息 10.nginx为什么比apache快？\nnginx采用epoll模型 apache采用select模型 11. 四层负载和七层负载区别是什么？\n四层基于IP+端口进行转发 七层就是基于URL等应用层信息的负载均衡 12. lvs有哪些工作模式？哪个性能高？\ndr：直接路由模式，请求由 LVS 接受，由真实提供服务的服务器直接返回给用户，返回的时候不经过 LVS。（性能最高） tun：隧道模式，客户端将访问vip报文发送给LVS服务器。LVS服务器将请求报文重新封装，发送给后端真实服务器。后端真实服务器将请求报文解封，在确认自身有vip之后进行请求处理。后端真实服务器在处理完数据请求后，直接响应客户端。 nat：网络报的进出都要经过 LVS 的处理。LVS 需要作为 RS 的网关。当包到达 LVS 时，LVS 做目标地址转换（DNAT），将目标 IP 改为 RS 的 IP。RS 接收到包以后，仿佛是客户端直接发给它的一样。RS 处理完，返回响应时，源 IP 是 RS IP，目标 IP 是客户端的 IP。这时 RS 的包通过网关（LVS）中转，LVS 会做源地址转换（SNAT），将包的源地址改为 VIP，这样，这个包对客户端看起来就仿佛是 LVS 直接返回给它的。客户端无法感知到后端 RS 的存在。 fullnat模式：fullnat模式和nat模式相似，但是与nat不同的是nat模式只做了两次地址转换，fullnat模式却做了四次。 13. tomcat各个目录含义，如何修改端口，如何修改内存数？\nbin 存放tomcat命令 conf 存放tomcat配置文件 lib 存放tomcat运行需要加载的jar包 log 存在Tomcat运行产生的日志 temp 运行过程中产生的临时文件 webapps 站点目录 work 存放tomcat运行时的编译后的文件 conf/server.xml 修改端口号 bin/catalina.sh 修改jvm内存 14. nginx反向代理时，如何使后端获取真正的访问来源ip？\n# 在location配置段添加以下内容： proxy_set_header Host $http_host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; 15. nginx负载均衡算法有哪些？\nrr 轮训 weight 加权轮训 ip_hash 静态调度算法 fair 动态调度算法 url_hash url哈希 leat_conn 最小连接数 16. 如何进行压力测试？\n例如：模拟10个用户，对百度首页发起总共100次请求。\n# 测试命令： ab -n 100 -c 10 https://www.baidu.com/index.htm 17. curl命令如何发送https请求？如何查看response头信息？如何发送get和post表单信息？\n发送https请求： curl --tlsv1 'https://www.bitstamp.net/api/v2/transactions/btcusd/' response头信息 ：curl -I get：curl 请求地址?key1=value1\u0026key2=value2\u0026key3=value3 post：curl -d “key1=value1\u0026key2=value2\u0026key3=value3” 二、mysql 1. 索引的为什么使查询加快？有啥缺点？ 默认的方式是根据搜索条件进行全表扫描，遇到匹配条件的就加入搜索结果集合。如果我们对某一字段增加索引，查询时就会先去索引列表中一次定位到特定值的行数，大大减少遍历匹配的行数，所以能明显增加查询的速度 缺点：\n创建索引和维护索引要耗费时间，这种时间随着数据量的增加而增加 索引需要占物理空间，除了数据表占用数据空间之外，每一个索引还要占用一定的物理空间，如果需要建立聚簇索引，那么需要占用的空间会更大 以表中的数据进行增、删、改的时候，索引也要动态的维护，这就降低了整数的维护速度 2. sql语句左外连接 右外连接 内连接 全连接区别 3. mysql数据备份方式，如何恢复？你们的备份策略是什么？ 物理完全备份 备份所有数据库文件：/var/lib/mysql/* 备份所有binlog文件: /var/lib/mysql/mysql-bin.* 备份选项文件: /etc/my.cnf mysqldump逻辑备份 mysqldump -uroot -p --all-databases \u003e /backup/mysqldump/all.db 物理备份恢复 #先把原来的数据目录改名 mv /var/lib/mysql /var/lib/mysql.old cp -a /backups/mysql /var/lib 逻辑备份数据恢复 mysql \u003e use db_name mysql \u003e source /backup/mysqldump/db_name.db 4. 如何配置数据库主从同步，实际工作中是否遇到数据不一致问题？如何解决？ 为每个服务器配置唯一值的server-id\n主库 开启binlog日志 创建主从复制用户 查看master的状态 从库 change master to设置主库信息 start slave开始复制 5. mysql约束有哪些？ 非空约束 唯一约束 主键约束 外键约束 6. 二进制日志（binlog）用途？ BINLOG记录数据库的变更过程。例如创建数据库、建表、修改表等DDL操作、以及数据表的相关DML操作，这些操作会导致数据库产生变化，开启binlog以后导致数据库产生变化的操作会按照时间顺序以“事件”的形式记录到binlog二进制文件中。\n7. mysql数据引擎有哪些？ 常用的 myisam、innodb 区别： （1）InnoDB 支持事务，MyISAM 不支持，这一点是非常之重要。事务是一种高级的处理方式，如在一些列增删改中只要哪个出错还可以回滚还原，而 MyISAM就不可以了； （2）MyISAM 适合查询以及插入为主的应用，InnoDB 适合频繁修改以及涉及到安全性较高的应用； （3）InnoDB 支持外键，MyISAM 不支持； （4）MyISAM 是默认引擎，InnoDB 需要指定； （5）InnoDB 不支持 FULLTEXT 类型的索引； （6）InnoDB 中不保存表的行数，如 select count(*) from table 时，InnoDB；需要扫描一遍整个表来计算有多少行，但是 MyISAM 只要简单的读出保存好的行数即可。注意的是，当 count()*语句包含 where 条件时 MyISAM 也需要扫描整个表； （7）对于自增长的字段，InnoDB 中必须包含只有该字段的索引，但是在 MyISAM表中可以和其他字段一起建立联合索引； （8）清空整个表时，InnoDB 是一行一行的删除，效率非常慢。MyISAM 则会重建表； （9）InnoDB 支持行锁（某些情况下还是锁整表，如 update table set a=1 where user like ‘%lee%’\n8. 如何查询mysql数据库存放路径？ myisam .frm文件：保护表的定义 .myd：保存表的数据 .myi：表的索引文件 9. mysql数据库文件后缀名有哪些？用途什么？ myisam .frm文件：保护表的定义 .myd：保存表的数据 .myi：表的索引文件 innodb .frm：保存表的定义 .ibd：表空间 10. 如何修改数据库用户的密码？ mysql8之前 set password for 用户名@localhost = password('新密码'); mysqladmin -u用户名 -p旧密码 password 新密码 update user set password=password('123') where user='root' and host='localhost'; mysql8之后 # mysql8初始对密码要求高，简单的字符串不让改。先改成:MyNewPass@123; alter user 'root'@'localhost' identified by 'MyNewPass@123'; # 降低密码难度 set global validate_password.policy=0; set global validate_password.length=4; # 修改成简易密码 alter user 'root'@'localhost'IDENTIFIED BY '1111'; 11. 如何修改用户权限？如何查看？ 授权： grant all on *.* to user@'%' identified by 'passwd' 查看权限 show grants for user@'%'; 三、nosql 1. redis数据持久化有哪些方式？ rdb aof 2. redis集群方案有哪些？ 官方cluster方案 twemproxy代理方案 哨兵模式 codis 客户端分片 3. redis如何进行数据备份与恢复？ 备份 redis 127.0.0.1:6379\u003e SAVE 创建 redis 备份文件也可以使用命令 BGSAVE，该命令在后台执行。 还原 只需将备份文件 (dump.rdb) 移动到 redis 安装目录并启动服务即可 redis 127.0.0.1:6379\u003e CONFIG GET dir 4. MongoDB如何进行数据备份？ mongoexport / mongoimport mongodump / mongorestore 5. kafka为何比redis rabbitmq快？ https://www.zhihu.com/question/22480085\n四、docker 1. dockerfile有哪些关键字？用途是什么？ 2.如何减小dockerfile生成镜像体积？ 尽量选取满足需求但较小的基础系统镜像，例如大部分时候可以选择debian:wheezy或debian:jessie镜像，仅有不足百兆大小； 清理编译生成文件、安装包的缓存等临时文件； 安装各个软件时候要指定准确的版本号，并避免引入不需要的依赖； 从安全角度考虑，应用要尽量使用系统的库和依赖； 如果安装应用时候需要配置一些特殊的环境变量，在安装后要还原不需要保持的变量值； 3. dockerfile中CMD与ENTRYPOINT区别是什么？ CMD 和 ENTRYPOINT 指令都是用来指定容器启动时运行的命令。 指定 ENTRYPOINT 指令为 exec 模式时，CMD指定的参数会作为参数添加到 ENTRYPOINT 指定命令的参数列表中。 4. dockerfile中COPY和ADD区别是什么？ COPY指令和ADD指令都可以将主机上的资源复制或加入到容器镜像中 区别是ADD可以从 远程URL中的资源不会被解压缩。 如果是本地的压缩包ADD进去会被解压缩 5. docker的cs架构组件有哪些？ 6. docker网络类型有哪些？ host模式 container模式 none模式 bridge模式 7. 如何配置docker远程访问？ vim /lib/systemd/system/docker.service 在ExecStart=后添加配置，注意，需要先空格后，再输入 -H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock 8. docker核心namespace CGroups 联合文件系统功能是什么？ namespace：资源隔离 cgroup：资源控制 联合文件系统：支持对文件系统的修改作为一次提交来一层层的叠加，同时可以将不同目录挂载到同一个虚拟文件系统下 9. 命令相关：导入导出镜像，进入容器，设置重启容器策略，查看镜像环境变量，查看容器占用资源 导入镜像 docker load -i xx.tar 导出镜像docker save -o xx.tar image_name 进入容器docker exec -it 容器命令 /bin/bash 设置容器重启策略启动时 –restart选项 查看容器环境变量 docker exec {containerID} env 查看容器资源占用docker stats test2 10. 构建镜像有哪些方式？ dockerfile 容器提交为镜像 11. docker和vmware虚拟化区别？ ",
  "wordCount" : "5437",
  "inLanguage": "en",
  "image":"http://oss.itshare.work/itshare-work-images/2.jpg","datePublished": "2022-09-02T20:08:44Z",
  "dateModified": "2022-09-02T20:08:44Z",
  "author":[{
    "@type": "Person",
    "name": "Cookie"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://hugo.itshare.work/archivist/linux%E8%BF%90%E7%BB%B4%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E9%A2%98%E6%B1%87%E6%80%BB2022/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Cookie",
    "logo": {
      "@type": "ImageObject",
      "url": "http://hugo.itshare.work/img/Q.gif"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    (function () {
        let  arr,reg = new RegExp("(^| )"+"change-themes"+"=([^;]*)(;|$)");
        if(arr = document.cookie.match(reg)) {
        } else {
            if (new Date().getHours() >= 19 || new Date().getHours() < 6) {
                document.body.classList.add('dark');
                localStorage.setItem("pref-theme", 'dark');
            } else {
                document.body.classList.remove('dark');
                localStorage.setItem("pref-theme", 'light');
            }
        }
    })()

    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://hugo.itshare.work/" accesskey="h" title="Cookie (Alt + H)">
            <img src="http://hugo.itshare.work/img/Q.gif" alt="logo" aria-label="logo"
                 height="35">Cookie</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://hugo.itshare.work/search" title="🔍 搜索 (Alt &#43; /)" accesskey=/>
                <span>🔍 搜索</span>
                </a>
            </li>
            <li>
                <a href="http://hugo.itshare.work/" title="🏠 主页">
                <span>🏠 主页</span>
                </a>
            </li>
            <li>
                <a href="http://hugo.itshare.work/posts" title="📚 文章">
                <span>📚 文章</span>
                </a>
            </li>
            <li>
                <a href="http://hugo.itshare.work/archivist" title="📒 归档">
                <span>📒 归档</span>
                </a>
            </li>
            <li>
                <a href="http://hugo.itshare.work/tags" title="🧩 标签">
                <span>🧩 标签</span>
                </a>
            </li>
            <li>
                <a href="http://hugo.itshare.work/archives/" title="⏱️ 时间轴">
                <span>⏱️ 时间轴</span>
                </a>
            </li>
            <li>
                <a href="http://hugo.itshare.work/about" title="🙋🏻‍♂️ 关于">
                <span>🙋🏻‍♂️ 关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main page">
<style>
    i[id*="post_meta_style"] {
        display: flex;
        align-items: center;
        margin: 0 0 10px 0;
    }
</style>

<article class="post-single">
    <div id="single-content">
        <header class="post-header">
            <div class="breadcrumbs"><a href="http://hugo.itshare.work/">🏠 主页</a>&nbsp;»&nbsp;<a href="http://hugo.itshare.work/archivist/">📒归档</a></div>
            <h1 class="post-title">
                Linux运维工程师面试题汇总(2022)
            </h1>
            <div class="post-description">
                “机会总是留给有准备的人的”，Linux运维工程师必备的基础知识可谓是由点及面、由浅入深。尤其是在云原生潮流趋势下，我们需要持续拥抱新技术、新思想，而不是在自己的舒适区原地踏步。
            </div>
            <div class="post-meta">

<style>
    i[id*="post_meta_style"] {
        display: flex;
        align-items: center;
        margin: 0 0 10px 0;
    }

    .parent-post-meta {
        display: flex;
        flex-wrap: wrap;
        opacity: 0.8;
    }
</style>

<span class="parent-post-meta">
    <span id="post_meta_style_1">
        <span class="fa fa-calendar-check-o"></span>
        <span>2022-09-02
            &nbsp;&nbsp;
        </span>
    </span>
    
    
    
    
    
    
    
    <span id="post_meta_style_3">
        <span class="fa fa-file-word-o"></span>
        <span>5437字
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_4">
        <span class="fa fa-clock-o"></span>
        <span>11分钟
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_5">
        <span class="fa fa-user-o"></span>
        <span>Cookie
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_6">
        <span class="fa fa-tags" style="opacity: 0.8"></span>
        <span>
        </span>
    </span>
</span>
<span style="opacity: 0.8;">
                    <span id="post_meta_style_7">
                        &nbsp;&nbsp;
                        <span class="fa fa-eye" ></span>
                        <span>
                            <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv"></span></span>
                            &nbsp;&nbsp;
                        </span>
                    </span>
                    <span id="post_meta_style_8">
                        <span class="fa fa-commenting-o"></span>
                        <span>
                            <script src="https://cdn.staticfile.org/twikoo/1.5.8/twikoo.all.min.js"></script>
                            <script>
                                let url = document.documentURI
                                
                                let dnsUrl = "http://hugo.itshare.work/"
                                let urlSplit = url.split(dnsUrl)
                                let finalUrl = urlSplit[1]
                                if (finalUrl[0] !== '/') {
                                    finalUrl = '/'+finalUrl
                                }
                                twikoo.getCommentsCount({
                                    envId:  null , 
                                region:  null , 
                                urls: [ 
                                    
                                    finalUrl,
                                ],
                                    includeReply: false 
                                }).then(function (res) {
                                    let count = res[0].count
                                    const obj = document.getElementById("comment_count");
                                    obj.innerText = count
                                    
                                    
                                    
                                }).catch(function (err) {
                                    
                                    console.error(err);
                                });
                            </script>
                            <span id="comment_count"></span>
                        </span>
                    </span>
                </span>

</div>
        </header> 
<figure class="entry-cover1"><img style="zoom:;" loading="lazy" src="http://oss.itshare.work/itshare-work-images/2.jpg" alt="">
    
</figure><aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">文章目录</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e4%b8%80linux" aria-label="一、linux"><strong>一、linux</strong></a><ul>
                        
                <li>
                    <a href="#1linux%e7%b3%bb%e7%bb%9f%e5%90%af%e5%8a%a8%e6%b5%81%e7%a8%8b" aria-label="1.linux系统启动流程"><strong>1.linux系统启动流程</strong></a></li>
                <li>
                    <a href="#2linux%e6%96%87%e4%bb%b6%e7%b1%bb%e5%9e%8b" aria-label="2.linux文件类型"><strong>2.linux文件类型</strong></a></li>
                <li>
                    <a href="#3centos6%e5%92%8c7%e6%80%8e%e4%b9%88%e5%b0%86%e6%ba%90%e7%a0%81%e5%ae%89%e8%a3%85%e7%9a%84%e7%a8%8b%e5%ba%8f%e6%b7%bb%e5%8a%a0%e5%88%b0%e5%bc%80%e6%9c%ba%e8%87%aa%e5%90%af%e5%8a%a8" aria-label="3.centos6和7怎么将源码安装的程序添加到开机自启动？"><strong>3.centos6和7怎么将源码安装的程序添加到开机自启动？</strong></a></li>
                <li>
                    <a href="#4%e7%ae%80%e8%bf%b0lvm%e5%a6%82%e4%bd%95%e7%bb%99%e4%bd%bf%e7%94%a8lvm%e7%9a%84%e5%88%86%e5%8c%ba%e6%89%a9%e5%ae%b9" aria-label="4.简述lvm，如何给使用lvm的/分区扩容？"><strong>4.简述lvm，如何给使用lvm的/分区扩容？</strong></a></li>
                <li>
                    <a href="#5%e4%b8%ba%e4%bd%95du%e5%92%8cdf%e7%bb%9f%e8%ae%a1%e7%bb%93%e6%9e%9c%e4%b8%8d%e4%b8%80%e8%87%b4" aria-label="5.为何du和df统计结果不一致？"><strong>5.为何du和df统计结果不一致？</strong></a></li>
                <li>
                    <a href="#6%e5%a6%82%e4%bd%95%e5%8d%87%e7%ba%a7%e5%86%85%e6%a0%b8" aria-label="6.如何升级内核？"><strong>6.如何升级内核？</strong></a></li></ul>
                </li>
                <li>
                    <a href="#%e4%ba%8cmysql" aria-label="二、mysql"><strong>二、mysql</strong></a><ul>
                        
                <li>
                    <a href="#1-%e7%b4%a2%e5%bc%95%e7%9a%84%e4%b8%ba%e4%bb%80%e4%b9%88%e4%bd%bf%e6%9f%a5%e8%af%a2%e5%8a%a0%e5%bf%ab%e6%9c%89%e5%95%a5%e7%bc%ba%e7%82%b9" aria-label="1. 索引的为什么使查询加快？有啥缺点？"><strong>1. 索引的为什么使查询加快？有啥缺点？</strong></a></li>
                <li>
                    <a href="#2-sql%e8%af%ad%e5%8f%a5%e5%b7%a6%e5%a4%96%e8%bf%9e%e6%8e%a5-%e5%8f%b3%e5%a4%96%e8%bf%9e%e6%8e%a5-%e5%86%85%e8%bf%9e%e6%8e%a5-%e5%85%a8%e8%bf%9e%e6%8e%a5%e5%8c%ba%e5%88%ab" aria-label="2. sql语句左外连接 右外连接 内连接 全连接区别"><strong>2. sql语句左外连接 右外连接 内连接 全连接区别</strong></a></li></ul>
                </li>
                <li>
                    <a href="#3-mysql%e6%95%b0%e6%8d%ae%e5%a4%87%e4%bb%bd%e6%96%b9%e5%bc%8f%e5%a6%82%e4%bd%95%e6%81%a2%e5%a4%8d%e4%bd%a0%e4%bb%ac%e7%9a%84%e5%a4%87%e4%bb%bd%e7%ad%96%e7%95%a5%e6%98%af%e4%bb%80%e4%b9%88" aria-label="3. mysql数据备份方式，如何恢复？你们的备份策略是什么？"><strong>3. mysql数据备份方式，如何恢复？你们的备份策略是什么？</strong></a></li>
                <li>
                    <a href="#4-%e5%a6%82%e4%bd%95%e9%85%8d%e7%bd%ae%e6%95%b0%e6%8d%ae%e5%ba%93%e4%b8%bb%e4%bb%8e%e5%90%8c%e6%ad%a5%e5%ae%9e%e9%99%85%e5%b7%a5%e4%bd%9c%e4%b8%ad%e6%98%af%e5%90%a6%e9%81%87%e5%88%b0%e6%95%b0%e6%8d%ae%e4%b8%8d%e4%b8%80%e8%87%b4%e9%97%ae%e9%a2%98%e5%a6%82%e4%bd%95%e8%a7%a3%e5%86%b3" aria-label="4. 如何配置数据库主从同步，实际工作中是否遇到数据不一致问题？如何解决？"><strong>4. 如何配置数据库主从同步，实际工作中是否遇到数据不一致问题？如何解决？</strong></a></li>
                <li>
                    <a href="#5-mysql%e7%ba%a6%e6%9d%9f%e6%9c%89%e5%93%aa%e4%ba%9b" aria-label="5. mysql约束有哪些？"><strong>5. mysql约束有哪些？</strong></a></li>
                <li>
                    <a href="#6-%e4%ba%8c%e8%bf%9b%e5%88%b6%e6%97%a5%e5%bf%97binlog%e7%94%a8%e9%80%94" aria-label="6. 二进制日志（binlog）用途？"><strong>6. 二进制日志（binlog）用途？</strong></a></li>
                <li>
                    <a href="#7-mysql%e6%95%b0%e6%8d%ae%e5%bc%95%e6%93%8e%e6%9c%89%e5%93%aa%e4%ba%9b" aria-label="7. mysql数据引擎有哪些？"><strong>7. mysql数据引擎有哪些？</strong></a></li>
                <li>
                    <a href="#8-%e5%a6%82%e4%bd%95%e6%9f%a5%e8%af%a2mysql%e6%95%b0%e6%8d%ae%e5%ba%93%e5%ad%98%e6%94%be%e8%b7%af%e5%be%84" aria-label="8. 如何查询mysql数据库存放路径？"><strong>8. 如何查询mysql数据库存放路径？</strong></a></li>
                <li>
                    <a href="#9-mysql%e6%95%b0%e6%8d%ae%e5%ba%93%e6%96%87%e4%bb%b6%e5%90%8e%e7%bc%80%e5%90%8d%e6%9c%89%e5%93%aa%e4%ba%9b%e7%94%a8%e9%80%94%e4%bb%80%e4%b9%88" aria-label="9. mysql数据库文件后缀名有哪些？用途什么？"><strong>9. mysql数据库文件后缀名有哪些？用途什么？</strong></a></li>
                <li>
                    <a href="#10-%e5%a6%82%e4%bd%95%e4%bf%ae%e6%94%b9%e6%95%b0%e6%8d%ae%e5%ba%93%e7%94%a8%e6%88%b7%e7%9a%84%e5%af%86%e7%a0%81" aria-label="10. 如何修改数据库用户的密码？"><strong>10. 如何修改数据库用户的密码？</strong></a></li>
                <li>
                    <a href="#11-%e5%a6%82%e4%bd%95%e4%bf%ae%e6%94%b9%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90%e5%a6%82%e4%bd%95%e6%9f%a5%e7%9c%8b" aria-label="11. 如何修改用户权限？如何查看？"><strong>11. 如何修改用户权限？如何查看？</strong></a></li>
                <li>
                    <a href="#%e4%b8%89nosql" aria-label="三、nosql"><strong>三、nosql</strong></a></li>
                <li>
                    <a href="#1-redis%e6%95%b0%e6%8d%ae%e6%8c%81%e4%b9%85%e5%8c%96%e6%9c%89%e5%93%aa%e4%ba%9b%e6%96%b9%e5%bc%8f" aria-label="1. redis数据持久化有哪些方式？"><strong>1. redis数据持久化有哪些方式？</strong></a></li>
                <li>
                    <a href="#2-redis%e9%9b%86%e7%be%a4%e6%96%b9%e6%a1%88%e6%9c%89%e5%93%aa%e4%ba%9b" aria-label="2. redis集群方案有哪些？"><strong>2. redis集群方案有哪些？</strong></a></li>
                <li>
                    <a href="#3-redis%e5%a6%82%e4%bd%95%e8%bf%9b%e8%a1%8c%e6%95%b0%e6%8d%ae%e5%a4%87%e4%bb%bd%e4%b8%8e%e6%81%a2%e5%a4%8d" aria-label="3. redis如何进行数据备份与恢复？"><strong>3. redis如何进行数据备份与恢复？</strong></a></li>
                <li>
                    <a href="#4-mongodb%e5%a6%82%e4%bd%95%e8%bf%9b%e8%a1%8c%e6%95%b0%e6%8d%ae%e5%a4%87%e4%bb%bd" aria-label="4. MongoDB如何进行数据备份？"><strong>4. MongoDB如何进行数据备份？</strong></a></li>
                <li>
                    <a href="#5-kafka%e4%b8%ba%e4%bd%95%e6%af%94redis-rabbitmq%e5%bf%ab" aria-label="5. kafka为何比redis rabbitmq快？"><strong>5. kafka为何比redis rabbitmq快？</strong></a></li>
                <li>
                    <a href="#%e5%9b%9bdocker" aria-label="四、docker"><strong>四、docker</strong></a><ul>
                        
                <li>
                    <a href="#1-dockerfile%e6%9c%89%e5%93%aa%e4%ba%9b%e5%85%b3%e9%94%ae%e5%ad%97%e7%94%a8%e9%80%94%e6%98%af%e4%bb%80%e4%b9%88" aria-label="1. dockerfile有哪些关键字？用途是什么？"><strong>1. dockerfile有哪些关键字？用途是什么？</strong></a></li>
                <li>
                    <a href="#2%e5%a6%82%e4%bd%95%e5%87%8f%e5%b0%8fdockerfile%e7%94%9f%e6%88%90%e9%95%9c%e5%83%8f%e4%bd%93%e7%a7%af" aria-label="2.如何减小dockerfile生成镜像体积？">2.<strong>如何减小dockerfile生成镜像体积？</strong></a></li>
                <li>
                    <a href="#3-dockerfile%e4%b8%adcmd%e4%b8%8eentrypoint%e5%8c%ba%e5%88%ab%e6%98%af%e4%bb%80%e4%b9%88" aria-label="3. dockerfile中CMD与ENTRYPOINT区别是什么？"><strong>3. dockerfile中CMD与ENTRYPOINT区别是什么？</strong></a></li>
                <li>
                    <a href="#4-dockerfile%e4%b8%adcopy%e5%92%8cadd%e5%8c%ba%e5%88%ab%e6%98%af%e4%bb%80%e4%b9%88" aria-label="4. dockerfile中COPY和ADD区别是什么？"><strong>4. dockerfile中COPY和ADD区别是什么？</strong></a></li>
                <li>
                    <a href="#5-docker%e7%9a%84cs%e6%9e%b6%e6%9e%84%e7%bb%84%e4%bb%b6%e6%9c%89%e5%93%aa%e4%ba%9b" aria-label="5. docker的cs架构组件有哪些？"><strong>5. docker的cs架构组件有哪些？</strong></a></li>
                <li>
                    <a href="#6-docker%e7%bd%91%e7%bb%9c%e7%b1%bb%e5%9e%8b%e6%9c%89%e5%93%aa%e4%ba%9b" aria-label="6. docker网络类型有哪些？"><strong>6. docker网络类型有哪些？</strong></a></li>
                <li>
                    <a href="#7-%e5%a6%82%e4%bd%95%e9%85%8d%e7%bd%aedocker%e8%bf%9c%e7%a8%8b%e8%ae%bf%e9%97%ae" aria-label="7. 如何配置docker远程访问？"><strong>7. 如何配置docker远程访问？</strong></a></li>
                <li>
                    <a href="#8-docker%e6%a0%b8%e5%bf%83namespace-cgroups-%e8%81%94%e5%90%88%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%e5%8a%9f%e8%83%bd%e6%98%af%e4%bb%80%e4%b9%88" aria-label="8. docker核心namespace CGroups 联合文件系统功能是什么？"><strong>8. docker核心namespace CGroups 联合文件系统功能是什么？</strong></a></li>
                <li>
                    <a href="#9-%e5%91%bd%e4%bb%a4%e7%9b%b8%e5%85%b3%e5%af%bc%e5%85%a5%e5%af%bc%e5%87%ba%e9%95%9c%e5%83%8f%e8%bf%9b%e5%85%a5%e5%ae%b9%e5%99%a8%e8%ae%be%e7%bd%ae%e9%87%8d%e5%90%af%e5%ae%b9%e5%99%a8%e7%ad%96%e7%95%a5%e6%9f%a5%e7%9c%8b%e9%95%9c%e5%83%8f%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f%e6%9f%a5%e7%9c%8b%e5%ae%b9%e5%99%a8%e5%8d%a0%e7%94%a8%e8%b5%84%e6%ba%90" aria-label="9. 命令相关：导入导出镜像，进入容器，设置重启容器策略，查看镜像环境变量，查看容器占用资源"><strong>9. 命令相关：导入导出镜像，进入容器，设置重启容器策略，查看镜像环境变量，查看容器占用资源</strong></a></li>
                <li>
                    <a href="#10-%e6%9e%84%e5%bb%ba%e9%95%9c%e5%83%8f%e6%9c%89%e5%93%aa%e4%ba%9b%e6%96%b9%e5%bc%8f" aria-label="10. 构建镜像有哪些方式？"><strong>10. 构建镜像有哪些方式？</strong></a></li>
                <li>
                    <a href="#11-docker%e5%92%8cvmware%e8%99%9a%e6%8b%9f%e5%8c%96%e5%8c%ba%e5%88%ab" aria-label="11. docker和vmware虚拟化区别？"><strong>11. docker和vmware虚拟化区别？</strong></a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
        
        activeElement = elements[0];
        const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
        document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
    }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 &&
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
            const id = encodeURI(element.getAttribute('id')).toLowerCase();
            if (element === activeElement){
                document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
            } else {
                document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
            }
        })
    }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;
        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;
    }
</script>
        <div class="post-content"><h2 id="一linux"><strong>一、linux</strong><a hidden class="anchor" aria-hidden="true" href="#一linux">#</a></h2>
<h3 id="1linux系统启动流程"><strong>1.linux系统启动流程</strong><a hidden class="anchor" aria-hidden="true" href="#1linux系统启动流程">#</a></h3>
<ul>
<li>第一步：开机自检，加载BIOS</li>
<li>第二步：读取ＭＢＲ</li>
<li>第三步：Boot Loader　grub引导菜单</li>
<li>第四步：加载kernel内核</li>
<li>第五步：init进程依据inittab文件夹来设定运行级别</li>
<li>第六步：init进程执行rc.sysinit</li>
<li>第七步：启动内核模块</li>
<li>第八步：执行不同运行级别的脚本程序</li>
<li>第九步：执行/etc/rc.d/rc.lo</li>
</ul>
<h3 id="2linux文件类型"><strong>2.linux文件类型</strong><a hidden class="anchor" aria-hidden="true" href="#2linux文件类型">#</a></h3>
<table>
<thead>
<tr>
<th>文件属性</th>
<th>文件类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>-</td>
<td>常规文件，即file</td>
</tr>
<tr>
<td>d</td>
<td>目录文件</td>
</tr>
<tr>
<td>b</td>
<td>block device 即块设备文件，如硬盘;支持以block为单位进行随机访问</td>
</tr>
<tr>
<td>c</td>
<td>character device 即字符设备文件，如键盘支持以character为单位进行线性访问</td>
</tr>
<tr>
<td>l</td>
<td>symbolic link 即符号链接文件，又称软链接文件</td>
</tr>
<tr>
<td>p</td>
<td>pipe 即命名管道文件</td>
</tr>
<tr>
<td>s</td>
<td>socket 即套接字文件，用于实现两个进程进行通信</td>
</tr>
</tbody>
</table>
<h3 id="3centos6和7怎么将源码安装的程序添加到开机自启动"><strong>3.centos6和7怎么将源码安装的程序添加到开机自启动？</strong><a hidden class="anchor" aria-hidden="true" href="#3centos6和7怎么将源码安装的程序添加到开机自启动">#</a></h3>
<ul>
<li>通用方法：编辑/etc/rc.d/rc.local文件，在文件末尾添加启动服务命令</li>
<li>centos6
①进入到/etc/rc.d/init.d目录下；
②新建一个服务启动脚本，脚本中指定chkconfig参数；
③添加执行权限；
④执行chkconfig &ndash;add 添加服务自启动；</li>
<li>centos7
①进入到/usr/lib/systemd/system目录下；
②新建自定义服务文件，文件中包含[Unit] [Service] [Install]相关配置，然后添加下执行权限；
③执行systemctl enable 服务名称；</li>
</ul>
<h3 id="4简述lvm如何给使用lvm的分区扩容"><strong>4.简述lvm，如何给使用lvm的/分区扩容？</strong><a hidden class="anchor" aria-hidden="true" href="#4简述lvm如何给使用lvm的分区扩容">#</a></h3>
<ul>
<li>功能：可以对磁盘进行动态管理。动态按需调整大小</li>
<li>概念：</li>
</ul>
<p>①PV - 物理卷：物理卷在逻辑卷管理中处于最底层，它可以是实际物理硬盘上的分区，也可以是整个物理硬盘，也可以是raid设备。
②VG - 卷组：卷组建立在物理卷之上，一个卷组中至少要包括一个物理卷，在卷组建立之后可动态添加物理卷到卷组中。一个逻辑卷管理系统工程中可以只有一个卷组，也可以拥有多个卷组。
③LV - 逻辑卷：逻辑卷建立在卷组之上，卷组中的未分配空间可以用于建立新的逻辑卷，逻辑卷建立后可以动态地扩展和缩小空间。系统中的多个逻辑卷可以属于同一个卷组，也可以属于不同的多个卷组。</p>
<p><img loading="lazy" src="../img/v2-95936b7fee09f7e980e5342affd6723e_720w.jpg" alt="alt"  />
</p>
<ul>
<li>给/分区扩容步骤：</li>
</ul>
<p>①添加磁盘
②使用fdisk命令对新增加的磁盘进行分区
③分区完成后修改分区类型为lvm
④使用pvcreate创建物理卷
⑤使用vgextend命令将新增加的分区加入到根目录分区中
⑥使用lvextend命令进行扩容
⑦使用xfs_growfs调整卷分区大小</p>
<h3 id="5为何du和df统计结果不一致"><strong>5.为何du和df统计结果不一致？</strong><a hidden class="anchor" aria-hidden="true" href="#5为何du和df统计结果不一致">#</a></h3>
<ul>
<li>用户删除了大量的文件被删除后，在文件系统目录中已经不可见了，所以du就不会再统计它。</li>
<li>然而如果此时还有运行的进程持有这个已经被删除的文件句柄，那么这个文件就不会真正在磁盘中被删除，分区超级块中的信息也就不会更改，df仍会统计这个被删除的文件。</li>
<li>可通过 lsof命令查询处于deleted状态的文件，被删除的文件在系统中被标记为deleted。如果系统有大量deleted状态的文件，会导致du和df统计结果不一致。</li>
</ul>
<h3 id="6如何升级内核"><strong>6.如何升级内核？</strong><a hidden class="anchor" aria-hidden="true" href="#6如何升级内核">#</a></h3>
<ul>
<li>方法一</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># 添加第三方yum源进行下载安装。
</span></span><span style="display:flex;"><span>Centos 6 YUM源：http://www.elrepo.org/elrepo-release-6-6.el6.elrepo.noarch.rpm
</span></span><span style="display:flex;"><span>Centos 7 YUM源：http://www.elrepo.org/elrepo-release-7.0-2.el7.elrepo.noarch.rpm
</span></span><span style="display:flex;"><span># 先导入elrepo的key，然后安装elrepo的yum源：
</span></span><span style="display:flex;"><span>rpm -import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org
</span></span><span style="display:flex;"><span>rpm -Uvh http://www.elrepo.org/elrepo-release-7.0-2.el7.elrepo.noarch.rpm
</span></span><span style="display:flex;"><span># 查看可用的内核相关包
</span></span><span style="display:flex;"><span>yum --disablerepo=&#34;*&#34; --enablerepo=&#34;elrepo-kernel&#34; list available 
</span></span><span style="display:flex;"><span>yum -y --enablerepo=elrepo-kernel install
</span></span></code></pre></div><ul>
<li>方法二</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># 通过下载kernel image的rpm包进行安装。
</span></span><span style="display:flex;"><span>官方 Centos 6: http://elrepo.org/linux/kernel/el6/x86_64/RPMS/
</span></span><span style="display:flex;"><span>官方 Centos 7: http://elrepo.org/linux/kernel/el7/x86_64/RPMS/
</span></span><span style="display:flex;"><span># 获取下载链接进行下载安装即可
</span></span><span style="display:flex;"><span>wget https://elrepo.org/linux/kernel/el7/x86_64/RPMS/kernel-lt-4.4.185-1.el7.elrepo.x86_64.rpm
</span></span><span style="display:flex;"><span>rpm -ivh kernel-lt-4.4.185-1.el7.elrepo.x86_64.rp
</span></span><span style="display:flex;"><span># 查看默认启动顺序
</span></span><span style="display:flex;"><span>[root@localhost ~]# awk -F\&#39; &#39;$1==&#34;menuentry &#34; {print $2}&#39; /etc/grub2.cfg
</span></span><span style="display:flex;"><span>CentOS Linux (5.2.2-1.el7.elrepo.x86_64) 7 (Core)
</span></span><span style="display:flex;"><span>CentOS Linux (4.4.182-1.el7.elrepo.x86_64) 7 (Core)
</span></span><span style="display:flex;"><span>CentOS Linux (3.10.0-957.21.3.el7.x86_64) 7 (Core)
</span></span><span style="display:flex;"><span>CentOS Linux (3.10.0-957.10.1.el7.x86_64) 7 (Core)
</span></span><span style="display:flex;"><span>CentOS Linux (3.10.0-327.el7.x86_64) 7 (Core)
</span></span><span style="display:flex;"><span>CentOS Linux (0-rescue-e34fb4f1527b4f2d9fc75b77c016b6e7) 7 (Core)
</span></span><span style="display:flex;"><span>由上面可以看出新内核(4.12.4)目前位置在0，原来的内核(3.10.0)目前位置在1
</span></span><span style="display:flex;"><span># 设置默认启动
</span></span><span style="display:flex;"><span>[root@localhost ~]# grub2-set-default 0　　// 0代表当前第一行，也就是4.12.4版本
</span></span><span style="display:flex;"><span># 重启验证
</span></span></code></pre></div><p><strong>7.nginx日志访问量前十的ip怎么统计？</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>awk &#39;{array[$1]++}END{for (ip in array)print ip,array[ip]}&#39; access.log |sort -k2 -rn|head
</span></span></code></pre></div><p><strong>8.如何删除/var/log/下.log结尾的30天前的日志？</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>find /var/log/ -type f -name .*.log -mtime 30|xargs rm -f
</span></span></code></pre></div><p><strong>9.ansible有哪些模块？功能是什么？</strong></p>
<table>
<thead>
<tr>
<th>模块</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>copy</td>
<td>拷贝文件到被控端</td>
</tr>
<tr>
<td>cron</td>
<td>定时任务</td>
</tr>
<tr>
<td>fetch</td>
<td>拷贝被控端文件到本地</td>
</tr>
<tr>
<td>file</td>
<td>文件模块</td>
</tr>
<tr>
<td>group</td>
<td>用户组模块</td>
</tr>
<tr>
<td>user</td>
<td>用户模块</td>
</tr>
<tr>
<td>hostname</td>
<td>主机名模块</td>
</tr>
<tr>
<td>script</td>
<td>脚本模块</td>
</tr>
<tr>
<td>service</td>
<td>服务启动模块</td>
</tr>
<tr>
<td>command</td>
<td>远程执行命令模块</td>
</tr>
<tr>
<td>shell</td>
<td>远程执行命令模块，command高级用法</td>
</tr>
<tr>
<td>yum</td>
<td>安装包组模块</td>
</tr>
<tr>
<td>setup</td>
<td>查看主机系统信息</td>
</tr>
</tbody>
</table>
<p><strong>10.nginx为什么比apache快？</strong></p>
<ul>
<li>nginx采用epoll模型</li>
<li>apache采用select模型</li>
</ul>
<p><strong>11. 四层负载和七层负载区别是什么？</strong></p>
<ul>
<li>四层基于IP+端口进行转发</li>
<li>七层就是基于URL等应用层信息的负载均衡</li>
</ul>
<p><strong>12. lvs有哪些工作模式？哪个性能高？</strong></p>
<ul>
<li>dr：直接路由模式，请求由 LVS 接受，由真实提供服务的服务器直接返回给用户，返回的时候不经过 LVS。（<strong>性能最高</strong>）</li>
<li>tun：隧道模式，客户端将访问vip报文发送给LVS服务器。LVS服务器将请求报文重新封装，发送给后端真实服务器。后端真实服务器将请求报文解封，在确认自身有vip之后进行请求处理。后端真实服务器在处理完数据请求后，直接响应客户端。</li>
<li>nat：网络报的进出都要经过 LVS 的处理。LVS 需要作为 RS 的网关。当包到达 LVS 时，LVS 做目标地址转换（DNAT），将目标 IP 改为 RS 的 IP。RS 接收到包以后，仿佛是客户端直接发给它的一样。RS 处理完，返回响应时，源 IP 是 RS IP，目标 IP 是客户端的 IP。这时 RS 的包通过网关（LVS）中转，LVS 会做源地址转换（SNAT），将包的源地址改为 VIP，这样，这个包对客户端看起来就仿佛是 LVS 直接返回给它的。客户端无法感知到后端 RS 的存在。</li>
<li>fullnat模式：fullnat模式和nat模式相似，但是与nat不同的是nat模式只做了两次地址转换，fullnat模式却做了四次。</li>
</ul>
<p><strong>13. tomcat各个目录含义，如何修改端口，如何修改内存数？</strong></p>
<ul>
<li>bin 存放tomcat命令</li>
<li>conf 存放tomcat配置文件</li>
<li>lib 存放tomcat运行需要加载的jar包</li>
<li>log 存在Tomcat运行产生的日志</li>
<li>temp 运行过程中产生的临时文件</li>
<li>webapps 站点目录</li>
<li>work 存放tomcat运行时的编译后的文件</li>
<li>conf/server.xml 修改端口号</li>
<li>bin/catalina.sh 修改jvm内存</li>
</ul>
<p><strong>14. nginx反向代理时，如何使后端获取真正的访问来源ip？</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># 在location配置段添加以下内容：
</span></span><span style="display:flex;"><span>proxy_set_header Host $http_host;
</span></span><span style="display:flex;"><span>proxy_set_header X-Real-IP $remote_addr;
</span></span><span style="display:flex;"><span>proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
</span></span><span style="display:flex;"><span>proxy_set_header X-Forwarded-Proto $scheme;
</span></span></code></pre></div><p><strong>15. nginx负载均衡算法有哪些？</strong></p>
<ul>
<li>rr 轮训</li>
<li>weight 加权轮训</li>
<li>ip_hash 静态调度算法</li>
<li>fair 动态调度算法</li>
<li>url_hash url哈希</li>
<li>leat_conn 最小连接数</li>
</ul>
<p><strong>16. 如何进行压力测试？</strong></p>
<p>例如：模拟10个用户，对百度首页发起总共100次请求。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># 测试命令：
</span></span><span style="display:flex;"><span>ab -n 100 -c 10 https://www.baidu.com/index.htm
</span></span></code></pre></div><p><strong>17. curl命令如何发送https请求？如何查看response头信息？如何发送get和post表单信息？</strong></p>
<ul>
<li>发送https请求：</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>curl --tlsv1 &#39;https://www.bitstamp.net/api/v2/transactions/btcusd/&#39;
</span></span></code></pre></div><ul>
<li>response头信息 ：curl -I</li>
<li>get：curl 请求地址?key1=value1&amp;key2=value2&amp;key3=value3</li>
<li>post：curl -d “key1=value1&amp;key2=value2&amp;key3=value3”</li>
</ul>
<h2 id="二mysql"><strong>二、mysql</strong><a hidden class="anchor" aria-hidden="true" href="#二mysql">#</a></h2>
<h3 id="1-索引的为什么使查询加快有啥缺点"><strong>1. 索引的为什么使查询加快？有啥缺点？</strong><a hidden class="anchor" aria-hidden="true" href="#1-索引的为什么使查询加快有啥缺点">#</a></h3>
<p>默认的方式是根据搜索条件进行全表扫描，遇到匹配条件的就加入搜索结果集合。如果我们对某一字段增加索引，查询时就会先去索引列表中一次定位到特定值的行数，大大减少遍历匹配的行数，所以能明显增加查询的速度
缺点：</p>
<ul>
<li>创建索引和维护索引要耗费时间，这种时间随着数据量的增加而增加</li>
<li>索引需要占物理空间，除了数据表占用数据空间之外，每一个索引还要占用一定的物理空间，如果需要建立聚簇索引，那么需要占用的空间会更大</li>
<li>以表中的数据进行增、删、改的时候，索引也要动态的维护，这就降低了整数的维护速度</li>
</ul>
<h3 id="2-sql语句左外连接-右外连接-内连接-全连接区别"><strong>2. sql语句左外连接 右外连接 内连接 全连接区别</strong><a hidden class="anchor" aria-hidden="true" href="#2-sql语句左外连接-右外连接-内连接-全连接区别">#</a></h3>
<p><img loading="lazy" src="../img/v2-2267ea8a39799ed2fd53736c1ce5a2ed_720w.jpg" alt=""  />
</p>
<h2 id="3-mysql数据备份方式如何恢复你们的备份策略是什么"><strong>3. mysql数据备份方式，如何恢复？你们的备份策略是什么？</strong><a hidden class="anchor" aria-hidden="true" href="#3-mysql数据备份方式如何恢复你们的备份策略是什么">#</a></h2>
<ul>
<li>物理完全备份</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>备份所有数据库文件：/var/lib/mysql/*
</span></span><span style="display:flex;"><span>备份所有binlog文件:  /var/lib/mysql/mysql-bin.*
</span></span><span style="display:flex;"><span>备份选项文件: /etc/my.cnf
</span></span></code></pre></div><ul>
<li>mysqldump逻辑备份</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>mysqldump -uroot -p --all-databases &gt; /backup/mysqldump/all.db
</span></span></code></pre></div><ul>
<li>物理备份恢复</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>#先把原来的数据目录改名
</span></span><span style="display:flex;"><span>mv /var/lib/mysql /var/lib/mysql.old  
</span></span><span style="display:flex;"><span>cp -a /backups/mysql /var/lib
</span></span></code></pre></div><ul>
<li>逻辑备份数据恢复</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>mysql &gt; use db_name
</span></span><span style="display:flex;"><span>mysql &gt; source /backup/mysqldump/db_name.db
</span></span></code></pre></div><h2 id="4-如何配置数据库主从同步实际工作中是否遇到数据不一致问题如何解决"><strong>4. 如何配置数据库主从同步，实际工作中是否遇到数据不一致问题？如何解决？</strong><a hidden class="anchor" aria-hidden="true" href="#4-如何配置数据库主从同步实际工作中是否遇到数据不一致问题如何解决">#</a></h2>
<p>为每个服务器配置唯一值的server-id</p>
<ul>
<li>主库</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>开启binlog日志
</span></span><span style="display:flex;"><span>创建主从复制用户
</span></span><span style="display:flex;"><span>查看master的状态
</span></span></code></pre></div><ul>
<li>从库</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>change master to设置主库信息
</span></span><span style="display:flex;"><span>start slave开始复制
</span></span></code></pre></div><h2 id="5-mysql约束有哪些"><strong>5. mysql约束有哪些？</strong><a hidden class="anchor" aria-hidden="true" href="#5-mysql约束有哪些">#</a></h2>
<ul>
<li>非空约束</li>
<li>唯一约束</li>
<li>主键约束</li>
<li>外键约束</li>
</ul>
<h2 id="6-二进制日志binlog用途"><strong>6. 二进制日志（binlog）用途？</strong><a hidden class="anchor" aria-hidden="true" href="#6-二进制日志binlog用途">#</a></h2>
<p>BINLOG记录数据库的变更过程。例如创建数据库、建表、修改表等DDL操作、以及数据表的相关DML操作，这些操作会导致数据库产生变化，开启binlog以后导致数据库产生变化的操作会按照时间顺序以“事件”的形式记录到binlog二进制文件中。</p>
<h2 id="7-mysql数据引擎有哪些"><strong>7. mysql数据引擎有哪些？</strong><a hidden class="anchor" aria-hidden="true" href="#7-mysql数据引擎有哪些">#</a></h2>
<ul>
<li>常用的 myisam、innodb</li>
<li>区别：</li>
</ul>
<p>（1）InnoDB 支持事务，MyISAM 不支持，这一点是非常之重要。事务是一种高级的处理方式，如在一些列增删改中只要哪个出错还可以回滚还原，而 MyISAM就不可以了；
（2）MyISAM 适合查询以及插入为主的应用，InnoDB 适合频繁修改以及涉及到安全性较高的应用；
（3）InnoDB 支持外键，MyISAM 不支持；
（4）MyISAM 是默认引擎，InnoDB 需要指定；
（5）InnoDB 不支持 FULLTEXT 类型的索引；
（6）InnoDB 中不保存表的行数，如 select count(*) from table 时，InnoDB；需要扫描一遍整个表来计算有多少行，但是 MyISAM 只要简单的读出保存好的行数即可。注意的是，当 count()*语句包含 where 条件时 MyISAM 也需要扫描整个表；
（7）对于自增长的字段，InnoDB 中必须包含只有该字段的索引，但是在 MyISAM表中可以和其他字段一起建立联合索引；
（8）清空整个表时，InnoDB 是一行一行的删除，效率非常慢。MyISAM 则会重建表；
（9）InnoDB 支持行锁（某些情况下还是锁整表，如 update table set a=1 where user like ‘%lee%’</p>
<h2 id="8-如何查询mysql数据库存放路径"><strong>8. 如何查询mysql数据库存放路径？</strong><a hidden class="anchor" aria-hidden="true" href="#8-如何查询mysql数据库存放路径">#</a></h2>
<ul>
<li>myisam</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>.frm文件：保护表的定义
</span></span><span style="display:flex;"><span>.myd：保存表的数据
</span></span><span style="display:flex;"><span>.myi：表的索引文件
</span></span></code></pre></div><h2 id="9-mysql数据库文件后缀名有哪些用途什么"><strong>9. mysql数据库文件后缀名有哪些？用途什么？</strong><a hidden class="anchor" aria-hidden="true" href="#9-mysql数据库文件后缀名有哪些用途什么">#</a></h2>
<ul>
<li>myisam</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>.frm文件：保护表的定义
</span></span><span style="display:flex;"><span>.myd：保存表的数据
</span></span><span style="display:flex;"><span>.myi：表的索引文件
</span></span></code></pre></div><ul>
<li>innodb</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>.frm：保存表的定义
</span></span><span style="display:flex;"><span>.ibd：表空间
</span></span></code></pre></div><h2 id="10-如何修改数据库用户的密码"><strong>10. 如何修改数据库用户的密码？</strong><a hidden class="anchor" aria-hidden="true" href="#10-如何修改数据库用户的密码">#</a></h2>
<ul>
<li>mysql8之前</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>set password for 用户名@localhost = password(&#39;新密码&#39;); 
</span></span><span style="display:flex;"><span>mysqladmin -u用户名 -p旧密码 password 新密码  
</span></span><span style="display:flex;"><span>update user set password=password(&#39;123&#39;) where user=&#39;root&#39; and host=&#39;localhost&#39;;
</span></span></code></pre></div><ul>
<li>mysql8之后</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># mysql8初始对密码要求高，简单的字符串不让改。先改成:MyNewPass@123;
</span></span><span style="display:flex;"><span>alter user &#39;root&#39;@&#39;localhost&#39; identified by &#39;MyNewPass@123&#39;;
</span></span><span style="display:flex;"><span># 降低密码难度
</span></span><span style="display:flex;"><span>set global validate_password.policy=0;
</span></span><span style="display:flex;"><span>set global validate_password.length=4;
</span></span><span style="display:flex;"><span># 修改成简易密码
</span></span><span style="display:flex;"><span>alter user &#39;root&#39;@&#39;localhost&#39;IDENTIFIED BY &#39;1111&#39;;  
</span></span></code></pre></div><h2 id="11-如何修改用户权限如何查看"><strong>11. 如何修改用户权限？如何查看？</strong><a hidden class="anchor" aria-hidden="true" href="#11-如何修改用户权限如何查看">#</a></h2>
<ul>
<li>授权：</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>grant all on *.* to user@&#39;%&#39; identified by &#39;passwd&#39;
</span></span></code></pre></div><ul>
<li>查看权限</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>show grants for user@&#39;%&#39;;
</span></span></code></pre></div><h2 id="三nosql"><strong>三、nosql</strong><a hidden class="anchor" aria-hidden="true" href="#三nosql">#</a></h2>
<h2 id="1-redis数据持久化有哪些方式"><strong>1. redis数据持久化有哪些方式？</strong><a hidden class="anchor" aria-hidden="true" href="#1-redis数据持久化有哪些方式">#</a></h2>
<ul>
<li>rdb</li>
<li>aof</li>
</ul>
<h2 id="2-redis集群方案有哪些"><strong>2. redis集群方案有哪些？</strong><a hidden class="anchor" aria-hidden="true" href="#2-redis集群方案有哪些">#</a></h2>
<ul>
<li>官方cluster方案</li>
<li>twemproxy代理方案</li>
<li>哨兵模式</li>
<li>codis
客户端分片</li>
</ul>
<h2 id="3-redis如何进行数据备份与恢复"><strong>3. redis如何进行数据备份与恢复？</strong><a hidden class="anchor" aria-hidden="true" href="#3-redis如何进行数据备份与恢复">#</a></h2>
<ul>
<li>备份</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>redis 127.0.0.1:6379&gt; SAVE
</span></span><span style="display:flex;"><span>创建 redis 备份文件也可以使用命令 BGSAVE，该命令在后台执行。
</span></span></code></pre></div><ul>
<li>还原</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>只需将备份文件 (dump.rdb) 移动到 redis 安装目录并启动服务即可
</span></span><span style="display:flex;"><span>redis 127.0.0.1:6379&gt; CONFIG GET dir
</span></span></code></pre></div><h2 id="4-mongodb如何进行数据备份"><strong>4. MongoDB如何进行数据备份？</strong><a hidden class="anchor" aria-hidden="true" href="#4-mongodb如何进行数据备份">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>mongoexport / mongoimport
</span></span><span style="display:flex;"><span>mongodump  / mongorestore
</span></span></code></pre></div><h2 id="5-kafka为何比redis-rabbitmq快"><strong>5. kafka为何比redis rabbitmq快？</strong><a hidden class="anchor" aria-hidden="true" href="#5-kafka为何比redis-rabbitmq快">#</a></h2>
<blockquote>
<p><a href="https://www.zhihu.com/question/22480085">https://www.zhihu.com/question/22480085</a></p>
</blockquote>
<h2 id="四docker"><strong>四、docker</strong><a hidden class="anchor" aria-hidden="true" href="#四docker">#</a></h2>
<h3 id="1-dockerfile有哪些关键字用途是什么"><strong>1. dockerfile有哪些关键字？用途是什么？</strong><a hidden class="anchor" aria-hidden="true" href="#1-dockerfile有哪些关键字用途是什么">#</a></h3>
<p><img loading="lazy" src="../img/v2-9ae3aef99f4daee76436faf8555981ac_720w.jpg" alt="img"  />
</p>
<h3 id="2如何减小dockerfile生成镜像体积">2.<strong>如何减小dockerfile生成镜像体积？</strong><a hidden class="anchor" aria-hidden="true" href="#2如何减小dockerfile生成镜像体积">#</a></h3>
<ul>
<li>尽量选取满足需求但较小的基础系统镜像，例如大部分时候可以选择debian:wheezy或debian:jessie镜像，仅有不足百兆大小；</li>
<li>清理编译生成文件、安装包的缓存等临时文件；</li>
<li>安装各个软件时候要指定准确的版本号，并避免引入不需要的依赖；</li>
<li>从安全角度考虑，应用要尽量使用系统的库和依赖；</li>
<li>如果安装应用时候需要配置一些特殊的环境变量，在安装后要还原不需要保持的变量值；</li>
</ul>
<h3 id="3-dockerfile中cmd与entrypoint区别是什么"><strong>3. dockerfile中CMD与ENTRYPOINT区别是什么？</strong><a hidden class="anchor" aria-hidden="true" href="#3-dockerfile中cmd与entrypoint区别是什么">#</a></h3>
<ul>
<li>CMD 和 ENTRYPOINT 指令都是用来指定容器启动时运行的命令。</li>
<li>指定 ENTRYPOINT 指令为 exec 模式时，CMD指定的参数会作为参数添加到 ENTRYPOINT 指定命令的参数列表中。</li>
</ul>
<h3 id="4-dockerfile中copy和add区别是什么"><strong>4. dockerfile中COPY和ADD区别是什么？</strong><a hidden class="anchor" aria-hidden="true" href="#4-dockerfile中copy和add区别是什么">#</a></h3>
<ul>
<li>COPY指令和ADD指令都可以将主机上的资源复制或加入到容器镜像中</li>
<li>区别是ADD可以从 远程URL中的资源不会被解压缩。</li>
<li>如果是本地的压缩包ADD进去会被解压缩</li>
</ul>
<h3 id="5-docker的cs架构组件有哪些"><strong>5. docker的cs架构组件有哪些？</strong><a hidden class="anchor" aria-hidden="true" href="#5-docker的cs架构组件有哪些">#</a></h3>
<p><img loading="lazy" src="../img/v2-1dd21665d0dc4c3b90d4e51361663f45_720w.jpg" alt="alt"  />
</p>
<h3 id="6-docker网络类型有哪些"><strong>6. docker网络类型有哪些？</strong><a hidden class="anchor" aria-hidden="true" href="#6-docker网络类型有哪些">#</a></h3>
<ul>
<li>host模式</li>
<li>container模式</li>
<li>none模式</li>
<li>bridge模式</li>
</ul>
<h3 id="7-如何配置docker远程访问"><strong>7. 如何配置docker远程访问？</strong><a hidden class="anchor" aria-hidden="true" href="#7-如何配置docker远程访问">#</a></h3>
<ul>
<li>vim /lib/systemd/system/docker.service</li>
<li>在ExecStart=后添加配置，注意，需要先空格后，再输入 -H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock</li>
</ul>
<h3 id="8-docker核心namespace-cgroups-联合文件系统功能是什么"><strong>8. docker核心namespace CGroups 联合文件系统功能是什么？</strong><a hidden class="anchor" aria-hidden="true" href="#8-docker核心namespace-cgroups-联合文件系统功能是什么">#</a></h3>
<ul>
<li>namespace：资源隔离</li>
<li>cgroup：资源控制</li>
<li>联合文件系统：支持对文件系统的修改作为一次提交来一层层的叠加，同时可以将不同目录挂载到同一个虚拟文件系统下</li>
</ul>
<h3 id="9-命令相关导入导出镜像进入容器设置重启容器策略查看镜像环境变量查看容器占用资源"><strong>9. 命令相关：导入导出镜像，进入容器，设置重启容器策略，查看镜像环境变量，查看容器占用资源</strong><a hidden class="anchor" aria-hidden="true" href="#9-命令相关导入导出镜像进入容器设置重启容器策略查看镜像环境变量查看容器占用资源">#</a></h3>
<ul>
<li>导入镜像 docker load -i xx.tar</li>
<li>导出镜像docker save -o xx.tar image_name</li>
<li>进入容器docker exec -it 容器命令 /bin/bash</li>
<li>设置容器重启策略启动时 &ndash;restart选项</li>
<li>查看容器环境变量 docker exec {containerID} env</li>
<li>查看容器资源占用docker stats test2</li>
</ul>
<h3 id="10-构建镜像有哪些方式"><strong>10. 构建镜像有哪些方式？</strong><a hidden class="anchor" aria-hidden="true" href="#10-构建镜像有哪些方式">#</a></h3>
<ul>
<li>dockerfile</li>
<li>容器提交为镜像</li>
</ul>
<h3 id="11-docker和vmware虚拟化区别"><strong>11. docker和vmware虚拟化区别？</strong><a hidden class="anchor" aria-hidden="true" href="#11-docker和vmware虚拟化区别">#</a></h3>
<p><img loading="lazy" src="../img/v2-bd145a7e16d4d62ad1b48c10c84b8acc_720w.jpg" alt=""  />
</p>


        </div>

        <footer class="post-footer">
            
<nav class="paginav">
  <a class="prev" href="http://hugo.itshare.work/archivist/%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5/">
    <span class="title">« 上一页</span>
    <br>
    <span>进程和线程相关概念</span>
  </a>
  <a class="next" href="http://hugo.itshare.work/archivist/network/">
    <span class="title">下一页 »</span>
    <br>
    <span>network</span>
  </a>
</nav>

        </footer>
    </div>
</article>
</main>

<footer class="footer">
    <span>
        Copyright
        &copy;
        2022-2023
        <a href="http://hugo.itshare.work/" style="color:#939393;">Cookie</a>
        All Rights Reserved
    </span>
    <a href="https://beian.miit.gov.cn/" target="_blank" style="color:#939393;"></a>&nbsp;
    <span>
        <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=null"
           style="display:inline-block;text-decoration:none;height:20px;color:#939393;">
            <img src="" style="float:left;margin: 0px 5px 0px 0px;"/>
            
        </a>
    </span>
    <span id="busuanzi_container">
        <span class="fa fa-user"></span> <span id="busuanzi_value_site_uv"></span>
        <span class="fa fa-eye"></span> <span id="busuanzi_value_site_pv"></span>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <span class="topInner">
        <svg class="topSvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z"/>
        </svg>
        <span id="read_progress"></span>
    </span>
</a>

<script>
    document.addEventListener('scroll', function (e) {
        const readProgress = document.getElementById("read_progress");
        const scrollHeight = document.documentElement.scrollHeight;
        const clientHeight = document.documentElement.clientHeight;
        const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
        readProgress.innerText = ((scrollTop / (scrollHeight - clientHeight)).toFixed(2) * 100).toFixed(0);
    })
</script>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });
</script>
<script>
    let mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };
</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        (function() {
            document.cookie = "change-themes" + "="+ escape ("false");
        })()

        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    });
</script>

<script>
    document.body.addEventListener('copy', function (e) {
        if (window.getSelection().toString() && window.getSelection().toString().length > 50) {
            let clipboardData = e.clipboardData || window.clipboardData;
            if (clipboardData) {
                e.preventDefault();
                let htmlData = window.getSelection().toString() +
                    '\r\n\n————————————————\r\n' +
                    '版权声明：本文为「'+"Cookie"+'」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。' +
                '\r\n原文链接：' + location.href;
                let textData = window.getSelection().toString() +
                    '\r\n\n————————————————\r\n' +
                    '版权声明：本文为「'+"Cookie"+'」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。' +
                '\r\n原文链接：' + location.href;
                clipboardData.setData('text/html', htmlData);
                clipboardData.setData('text/plain', textData);
            }
        }
    });
</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;
        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = '📄复制';

        function copyingDone() {
            copybutton.innerText = '👌🏻已复制!';
            setTimeout(() => {
                copybutton.innerText = '📄复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                let text = codeblock.textContent +
                    '\r\n————————————————\r\n' +
                    '版权声明：本文为「'+"Cookie"+'」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。' +
                '\r\n原文链接：' + location.href;
                navigator.clipboard.writeText(text);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) {}
            selection.removeRange(range);
        });

        let language = codeblock.className.replaceAll("language-", "")
        let macTool = document.createElement("div")
        let macTool1 = document.createElement("div")
        let macTool2 = document.createElement("div")
        let macTool3 = document.createElement("div")
        let languageType = document.createElement("div")
        languageType.innerText = language
        macTool.setAttribute('class', 'mac-tool')
        macTool1.setAttribute('class', 'mac bb1')
        macTool2.setAttribute('class', 'mac bb2')
        macTool3.setAttribute('class', 'mac bb3')
        languageType.setAttribute('class', 'language-type')
        macTool.appendChild(macTool1)
        macTool.appendChild(macTool2)
        macTool.appendChild(macTool3)
        macTool.appendChild(languageType)

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
            container.appendChild(macTool)
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
            container.appendChild(macTool)
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
            container.appendChild(macTool)
        }
    });
</script>
</body>

</html>
